{"version":3,"file":"useResourceTableSearch.js","names":["_react","require","_config","_lodash","NONE","useResourceTableSearch","_ref","handleChangeTableSearch","fields","propFields","getQueryMethod","excludedSearchFields","isChecked","setChecked","useState","selectedField","setSelectedField","savedFields","setSavedFields","useMemo","filter","item","includes","onChangeSearch","useCallback","_ref2","target","value","code","search","byField","onChangeSwitch","switchValue","onSelectDropdownField","_ref3","BOOLEAN_VALUES","dropdownFields","name","map","field","capitalize","useEffect","length","_default","exports","default"],"sources":["../../../../src/resources/ResourceTableSearch/talons/useResourceTableSearch.ts"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport type { TableSearchArgument } from \"../models/TableSearchArgument\";\nimport { DropdownChangeEvent } from \"primereact/dropdown\";\nimport type { InputEventType } from \"../../../types/InputEventTypes\";\nimport { DropdownField } from \"../models/DropdownField\";\nimport { BOOLEAN_VALUES } from \"../config\";\nimport { capitalize } from \"lodash\";\n\nconst NONE = \"none\";\n\ninterface UseResourceTableSearchProps {\n  handleChangeTableSearch?: (arg: TableSearchArgument) => void;\n  fields: string[];\n  getQueryMethod?: any;\n  excludedSearchFields?: string[];\n}\n\nconst useResourceTableSearch = ({\n  handleChangeTableSearch,\n  fields: propFields,\n  getQueryMethod,\n  excludedSearchFields,\n}: UseResourceTableSearchProps) => {\n  const [isChecked, setChecked] = useState<boolean>(false);\n  const [selectedField, setSelectedField] = useState<DropdownField | null>(\n    null\n  );\n\n  const [savedFields, setSavedFields] = useState<any>(null);\n\n  const fields = useMemo(\n    () =>\n      excludedSearchFields\n        ? propFields.filter((item) => !excludedSearchFields.includes(item))\n        : propFields,\n    [excludedSearchFields, propFields]\n  );\n\n  const onChangeSearch = useCallback(\n    ({ target: { value } }: InputEventType) => {\n      if (\n        handleChangeTableSearch &&\n        selectedField &&\n        selectedField.code !== NONE\n      ) {\n        handleChangeTableSearch({\n          search: value,\n          byField: selectedField.code,\n        });\n      }\n    },\n    [selectedField, handleChangeTableSearch]\n  );\n\n  const onChangeSwitch = useCallback(\n    (switchValue: boolean) => {\n      setChecked(switchValue);\n      if (handleChangeTableSearch && selectedField) {\n        handleChangeTableSearch({\n          search: switchValue,\n          byField: selectedField.code,\n        });\n      }\n    },\n    [selectedField, setChecked, handleChangeTableSearch]\n  );\n\n  const onSelectDropdownField = useCallback(\n    ({ value }: DropdownChangeEvent) => {\n      setSelectedField(value);\n\n      if (value.code === NONE && getQueryMethod) {\n        getQueryMethod();\n      }\n\n      if (BOOLEAN_VALUES.includes(value.code) && handleChangeTableSearch) {\n        handleChangeTableSearch({\n          search: false,\n          byField: value.code,\n        });\n      }\n    },\n    [handleChangeTableSearch, getQueryMethod, setSelectedField]\n  );\n\n  const dropdownFields = useMemo(\n    () => [\n      { name: \"None\", code: NONE },\n      ...fields.map((field) => ({\n        name: capitalize(field),\n        code: field,\n      })),\n    ],\n    [fields]\n  ) as DropdownField[];\n\n  useEffect(() => {\n    if (dropdownFields && dropdownFields.length > 1) {\n      setSavedFields(dropdownFields);\n    }\n  }, [dropdownFields, setSavedFields]);\n\n  useEffect(() => {\n    return () => getQueryMethod();\n  }, []);\n\n  return {\n    isChecked,\n    onChangeSwitch,\n    onChangeSearch,\n    onSelectDropdownField,\n    selectedField,\n    dropdownFields: dropdownFields.length > 1 ? dropdownFields : savedFields,\n  };\n};\n\nexport default useResourceTableSearch;\n"],"mappings":"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"}