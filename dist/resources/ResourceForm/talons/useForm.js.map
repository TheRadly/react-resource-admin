{"version":3,"file":"useForm.js","names":["_formik","require","_react","_typenameIdFilter","_interopRequireDefault","obj","__esModule","default","useForm","_ref","initialValues","onSubmitMethod","valuesForEdit","omitValuesForEdit","form","useFormik","typenameIdFilter","onSubmit","values","formValues","setFieldValue","handleSubmit","useEffect","filteredValues","setValues","useMemo","Object","keys","map","field","value","handleChangeField","useCallback","formHandler","_default","exports"],"sources":["../../../../src/resources/ResourceForm/talons/useForm.ts"],"sourcesContent":["import { useFormik } from \"formik\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport typenameIdFilter from \"../../../utils/typenameIdFilter\";\n\ninterface UseFormProps {\n  initialValues?: any;\n  onSubmitMethod: any;\n  valuesForEdit?: any;\n  omitValuesForEdit?: any;\n}\n\nconst useForm = ({\n  initialValues = null,\n  onSubmitMethod,\n  valuesForEdit,\n  omitValuesForEdit,\n}: UseFormProps) => {\n  const form = useFormik({\n    initialValues: typenameIdFilter(initialValues || {}) as any,\n    onSubmit: onSubmitMethod,\n  });\n\n  const { values: formValues, setFieldValue, handleSubmit } = form;\n\n  useEffect(() => {\n    if (valuesForEdit && !initialValues) {\n      const filteredValues = typenameIdFilter(\n        { ...valuesForEdit },\n        omitValuesForEdit && [...omitValuesForEdit]\n      );\n\n      form.setValues(filteredValues);\n    }\n  }, [form, initialValues, omitValuesForEdit, valuesForEdit]);\n\n  const values = useMemo(\n    () =>\n      Object.keys(formValues).map((field) => ({\n        field,\n        value: formValues[field],\n      })),\n    [formValues]\n  );\n\n  const handleChangeField = useCallback(\n    (value: string | number | boolean, field: string) => {\n      setFieldValue(field, value);\n    },\n    [setFieldValue]\n  );\n\n  return {\n    formHandler: form,\n    formValues,\n    values,\n    setFieldValue,\n    handleChangeField,\n    handleSubmit,\n  };\n};\n\nexport default useForm;\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,iBAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA+D,SAAAG,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAS/D,MAAMG,OAAO,GAAGC,IAAA,IAKI;EAAA,IALH;IACfC,aAAa,GAAG,IAAI;IACpBC,cAAc;IACdC,aAAa;IACbC;EACY,CAAC,GAAAJ,IAAA;EACb,MAAMK,IAAI,GAAG,IAAAC,iBAAS,EAAC;IACrBL,aAAa,EAAE,IAAAM,yBAAgB,EAACN,aAAa,IAAI,CAAC,CAAC,CAAQ;IAC3DO,QAAQ,EAAEN;EACZ,CAAC,CAAC;EAEF,MAAM;IAAEO,MAAM,EAAEC,UAAU;IAAEC,aAAa;IAAEC;EAAa,CAAC,GAAGP,IAAI;EAEhE,IAAAQ,gBAAS,EAAC,MAAM;IACd,IAAIV,aAAa,IAAI,CAACF,aAAa,EAAE;MACnC,MAAMa,cAAc,GAAG,IAAAP,yBAAgB,EACrC;QAAE,GAAGJ;MAAc,CAAC,EACpBC,iBAAiB,IAAI,CAAC,GAAGA,iBAAiB,CAC5C,CAAC;MAEDC,IAAI,CAACU,SAAS,CAACD,cAAc,CAAC;IAChC;EACF,CAAC,EAAE,CAACT,IAAI,EAAEJ,aAAa,EAAEG,iBAAiB,EAAED,aAAa,CAAC,CAAC;EAE3D,MAAMM,MAAM,GAAG,IAAAO,cAAO,EACpB,MACEC,MAAM,CAACC,IAAI,CAACR,UAAU,CAAC,CAACS,GAAG,CAAEC,KAAK,KAAM;IACtCA,KAAK;IACLC,KAAK,EAAEX,UAAU,CAACU,KAAK;EACzB,CAAC,CAAC,CAAC,EACL,CAACV,UAAU,CACb,CAAC;EAED,MAAMY,iBAAiB,GAAG,IAAAC,kBAAW,EACnC,CAACF,KAAgC,EAAED,KAAa,KAAK;IACnDT,aAAa,CAACS,KAAK,EAAEC,KAAK,CAAC;EAC7B,CAAC,EACD,CAACV,aAAa,CAChB,CAAC;EAED,OAAO;IACLa,WAAW,EAAEnB,IAAI;IACjBK,UAAU;IACVD,MAAM;IACNE,aAAa;IACbW,iBAAiB;IACjBV;EACF,CAAC;AACH,CAAC;AAAC,IAAAa,QAAA,GAEa1B,OAAO;AAAA2B,OAAA,CAAA5B,OAAA,GAAA2B,QAAA"}