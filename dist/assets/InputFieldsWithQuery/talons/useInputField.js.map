{"version":3,"file":"useInputField.js","names":["_react","require","_staticTexts","_parseFormValues","_interopRequireDefault","_typenameIdFilter","_confirmpopup","_pageActions","obj","__esModule","default","useInputField","_ref","item","fieldsToExclude","extraFormCruds","deleteQuery","deleteConfirmMessage","refetchDocument","fields","parseFormValues","typenameIdFilter","handleDeleteValues","onClickDelete","useCallback","variables","input","ids","id","refetchQueries","query","pagination","page","limit","handleDeleteItem","event","confirmPopup","target","message","icon","EXCLAMATION_TRIANGLE_ICON","accept","acceptClassName","classes","customAccept","rejectClassName","customReject","_default","exports"],"sources":["../../../../src/assets/InputFieldsWithQuery/talons/useInputField.ts"],"sourcesContent":["import { useCallback } from \"react\";\nimport { EXCLAMATION_TRIANGLE_ICON } from \"../../../staticTexts\";\nimport parseFormValues from \"../../../utils/parseFormValues\";\nimport typenameIdFilter from \"../../../utils/typenameIdFilter\";\nimport { confirmPopup } from \"primereact/confirmpopup\";\nimport { CrudType } from \"../../../resources/ResourceInputsForm/models/CrudType\";\n\nimport classes from \"../../../resources/ResourceTableActions/styles/pageActions.scss\";\n\ninterface UseInputFieldProps {\n  item: any;\n  fieldsToExclude?: string[];\n  extraFormCruds?: CrudType;\n}\n\nconst useInputField = ({\n  item,\n  fieldsToExclude,\n  extraFormCruds,\n}: UseInputFieldProps) => {\n  const { deleteQuery, deleteConfirmMessage, refetchDocument } =\n    extraFormCruds || {};\n  const fields = parseFormValues(typenameIdFilter(item, fieldsToExclude));\n\n  const [handleDeleteValues] = deleteQuery();\n\n  const onClickDelete = useCallback(() => {\n    handleDeleteValues({\n      variables: {\n        input: {\n          ids: [item.id],\n        },\n      },\n      ...(refetchDocument\n        ? {\n            refetchQueries: [\n              {\n                query: refetchDocument,\n                variables: { input: { pagination: { page: 0, limit: 10 } } },\n              },\n            ],\n          }\n        : null),\n    });\n  }, [refetchDocument, handleDeleteValues, item]);\n\n  const handleDeleteItem = useCallback(\n    (event: any) => {\n      confirmPopup({\n        target: event.target,\n        message: deleteConfirmMessage,\n        icon: EXCLAMATION_TRIANGLE_ICON,\n        accept: onClickDelete,\n        acceptClassName: classes.customAccept,\n        rejectClassName: classes.customReject,\n      });\n    },\n    [deleteConfirmMessage, onClickDelete]\n  );\n\n  return { fields, handleDeleteItem };\n};\n\nexport default useInputField;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,iBAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,aAAA,GAAAL,OAAA;AAGA,IAAAM,YAAA,GAAAH,sBAAA,CAAAH,OAAA;AAAsF,SAAAG,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAQtF,MAAMG,aAAa,GAAGC,IAAA,IAII;EAAA,IAJH;IACrBC,IAAI;IACJC,eAAe;IACfC;EACkB,CAAC,GAAAH,IAAA;EACnB,MAAM;IAAEI,WAAW;IAAEC,oBAAoB;IAAEC;EAAgB,CAAC,GAC1DH,cAAc,IAAI,CAAC,CAAC;EACtB,MAAMI,MAAM,GAAG,IAAAC,wBAAe,EAAC,IAAAC,yBAAgB,EAACR,IAAI,EAAEC,eAAe,CAAC,CAAC;EAEvE,MAAM,CAACQ,kBAAkB,CAAC,GAAGN,WAAW,CAAC,CAAC;EAE1C,MAAMO,aAAa,GAAG,IAAAC,kBAAW,EAAC,MAAM;IACtCF,kBAAkB,CAAC;MACjBG,SAAS,EAAE;QACTC,KAAK,EAAE;UACLC,GAAG,EAAE,CAACd,IAAI,CAACe,EAAE;QACf;MACF,CAAC;MACD,IAAIV,eAAe,GACf;QACEW,cAAc,EAAE,CACd;UACEC,KAAK,EAAEZ,eAAe;UACtBO,SAAS,EAAE;YAAEC,KAAK,EAAE;cAAEK,UAAU,EAAE;gBAAEC,IAAI,EAAE,CAAC;gBAAEC,KAAK,EAAE;cAAG;YAAE;UAAE;QAC7D,CAAC;MAEL,CAAC,GACD,IAAI;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAACf,eAAe,EAAEI,kBAAkB,EAAET,IAAI,CAAC,CAAC;EAE/C,MAAMqB,gBAAgB,GAAG,IAAAV,kBAAW,EACjCW,KAAU,IAAK;IACd,IAAAC,0BAAY,EAAC;MACXC,MAAM,EAAEF,KAAK,CAACE,MAAM;MACpBC,OAAO,EAAErB,oBAAoB;MAC7BsB,IAAI,EAAEC,sCAAyB;MAC/BC,MAAM,EAAElB,aAAa;MACrBmB,eAAe,EAAEC,oBAAO,CAACC,YAAY;MACrCC,eAAe,EAAEF,oBAAO,CAACG;IAC3B,CAAC,CAAC;EACJ,CAAC,EACD,CAAC7B,oBAAoB,EAAEM,aAAa,CACtC,CAAC;EAED,OAAO;IAAEJ,MAAM;IAAEe;EAAiB,CAAC;AACrC,CAAC;AAAC,IAAAa,QAAA,GAEapC,aAAa;AAAAqC,OAAA,CAAAtC,OAAA,GAAAqC,QAAA"}