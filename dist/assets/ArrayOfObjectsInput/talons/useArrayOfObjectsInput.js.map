{"version":3,"file":"useArrayOfObjectsInput.js","names":["_react","require","AMOUNT","useArrayOfObjectsInput","_ref","initialValue","values","itemTitledBy","onChange","objectOfArray","setObjectOfArray","useState","arrayOfItems","useMemo","filter","item","Object","keys","some","key","arrayOfFields","map","defaultData","field","value","toString","isFloat","handleChangeFieldValue","useCallback","data","handleSetFieldsData","mutatedArr","handleRemoveItem","propIndex","length","newArray","_","index","_default","exports","default"],"sources":["../../../../src/assets/ArrayOfObjectsInput/talons/useArrayOfObjectsInput.ts"],"sourcesContent":["import { useCallback, useMemo, useState } from \"react\";\n\ninterface UseArrayOfObjectsInputProps {\n  onChange: (arg: any) => void;\n  initialValue?: any;\n  itemTitledBy?: string;\n  values: any[];\n}\n\nconst AMOUNT = \"amount\";\n\nconst useArrayOfObjectsInput = ({\n  initialValue,\n  values,\n  itemTitledBy,\n  onChange,\n}: UseArrayOfObjectsInputProps) => {\n  const [objectOfArray, setObjectOfArray] = useState<any>(initialValue);\n\n  const arrayOfItems = useMemo(\n    () =>\n      itemTitledBy\n        ? values.filter((item) =>\n            Object.keys(item).some((key) => key === itemTitledBy)\n          )\n        : values,\n    [itemTitledBy, values]\n  );\n\n  const arrayOfFields = useMemo(\n    () =>\n      Object.keys(objectOfArray).map((key) => {\n        const defaultData = {\n          field: key,\n          value: objectOfArray[key],\n        };\n\n        if (key === AMOUNT) {\n          return {\n            ...defaultData,\n            value: objectOfArray[key].toString(),\n            isFloat: true,\n          };\n        }\n\n        return defaultData;\n      }),\n    [objectOfArray]\n  ) as any;\n\n  const handleChangeFieldValue = useCallback(\n    (field: string, data: any) =>\n      setObjectOfArray({ ...objectOfArray, [field]: data }),\n    [objectOfArray]\n  );\n\n  const handleSetFieldsData = useCallback(() => {\n    const mutatedArr = [...values, objectOfArray];\n    onChange(mutatedArr);\n    setObjectOfArray(initialValue);\n  }, [objectOfArray, onChange, values, initialValue]);\n\n  const handleRemoveItem = useCallback(\n    (propIndex: number) => {\n      if (values.length) {\n        const newArray = values.filter(\n          (_: any, index: number) => index !== propIndex\n        );\n\n        setObjectOfArray(newArray);\n      }\n    },\n    [values]\n  );\n\n  return {\n    arrayOfFields,\n    arrayOfItems,\n    handleChangeFieldValue,\n    handleSetFieldsData,\n    handleRemoveItem,\n  };\n};\n\nexport default useArrayOfObjectsInput;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AASA,MAAMC,MAAM,GAAG,QAAQ;AAEvB,MAAMC,sBAAsB,GAAGC,IAAA,IAKI;EAAA,IALH;IAC9BC,YAAY;IACZC,MAAM;IACNC,YAAY;IACZC;EAC2B,CAAC,GAAAJ,IAAA;EAC5B,MAAM,CAACK,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAAC,eAAQ,EAAMN,YAAY,CAAC;EAErE,MAAMO,YAAY,GAAG,IAAAC,cAAO,EAC1B,MACEN,YAAY,GACRD,MAAM,CAACQ,MAAM,CAAEC,IAAI,IACjBC,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,IAAI,CAAEC,GAAG,IAAKA,GAAG,KAAKZ,YAAY,CACtD,CAAC,GACDD,MAAM,EACZ,CAACC,YAAY,EAAED,MAAM,CACvB,CAAC;EAED,MAAMc,aAAa,GAAG,IAAAP,cAAO,EAC3B,MACEG,MAAM,CAACC,IAAI,CAACR,aAAa,CAAC,CAACY,GAAG,CAAEF,GAAG,IAAK;IACtC,MAAMG,WAAW,GAAG;MAClBC,KAAK,EAAEJ,GAAG;MACVK,KAAK,EAAEf,aAAa,CAACU,GAAG;IAC1B,CAAC;IAED,IAAIA,GAAG,KAAKjB,MAAM,EAAE;MAClB,OAAO;QACL,GAAGoB,WAAW;QACdE,KAAK,EAAEf,aAAa,CAACU,GAAG,CAAC,CAACM,QAAQ,CAAC,CAAC;QACpCC,OAAO,EAAE;MACX,CAAC;IACH;IAEA,OAAOJ,WAAW;EACpB,CAAC,CAAC,EACJ,CAACb,aAAa,CAChB,CAAQ;EAER,MAAMkB,sBAAsB,GAAG,IAAAC,kBAAW,EACxC,CAACL,KAAa,EAAEM,IAAS,KACvBnB,gBAAgB,CAAC;IAAE,GAAGD,aAAa;IAAE,CAACc,KAAK,GAAGM;EAAK,CAAC,CAAC,EACvD,CAACpB,aAAa,CAChB,CAAC;EAED,MAAMqB,mBAAmB,GAAG,IAAAF,kBAAW,EAAC,MAAM;IAC5C,MAAMG,UAAU,GAAG,CAAC,GAAGzB,MAAM,EAAEG,aAAa,CAAC;IAC7CD,QAAQ,CAACuB,UAAU,CAAC;IACpBrB,gBAAgB,CAACL,YAAY,CAAC;EAChC,CAAC,EAAE,CAACI,aAAa,EAAED,QAAQ,EAAEF,MAAM,EAAED,YAAY,CAAC,CAAC;EAEnD,MAAM2B,gBAAgB,GAAG,IAAAJ,kBAAW,EACjCK,SAAiB,IAAK;IACrB,IAAI3B,MAAM,CAAC4B,MAAM,EAAE;MACjB,MAAMC,QAAQ,GAAG7B,MAAM,CAACQ,MAAM,CAC5B,CAACsB,CAAM,EAAEC,KAAa,KAAKA,KAAK,KAAKJ,SACvC,CAAC;MAEDvB,gBAAgB,CAACyB,QAAQ,CAAC;IAC5B;EACF,CAAC,EACD,CAAC7B,MAAM,CACT,CAAC;EAED,OAAO;IACLc,aAAa;IACbR,YAAY;IACZe,sBAAsB;IACtBG,mBAAmB;IACnBE;EACF,CAAC;AACH,CAAC;AAAC,IAAAM,QAAA,GAEanC,sBAAsB;AAAAoC,OAAA,CAAAC,OAAA,GAAAF,QAAA"}