{"version":3,"file":"useArrayOfObjectsInput.js","names":["_react","require","AMOUNT","useArrayOfObjectsInput","_ref","initialValue","values","itemTitledBy","onChange","indexEditItem","setIndexEditItem","useState","isEditMode","setEditMode","objectOfArray","setObjectOfArray","arrayOfItems","useMemo","filter","item","Object","keys","some","key","arrayOfFields","map","defaultData","field","value","toString","isFloat","handleChangeFieldValue","useCallback","data","handleSetFieldsData","mutatedArr","handleRemoveItem","propIndex","length","newArray","_","index","handleEditItem","handleSetEditedFieldData","id","push","_default","exports","default"],"sources":["../../../../src/assets/ArrayOfObjectsInput/talons/useArrayOfObjectsInput.ts"],"sourcesContent":["import { useCallback, useMemo, useState } from \"react\";\n\ninterface UseArrayOfObjectsInputProps {\n  onChange: (arg: any) => void;\n  initialValue?: any;\n  itemTitledBy?: string;\n  values: any[];\n}\n\nconst AMOUNT = \"amount\";\n\nconst useArrayOfObjectsInput = ({\n  initialValue,\n  values,\n  itemTitledBy,\n  onChange,\n}: UseArrayOfObjectsInputProps) => {\n  const [indexEditItem, setIndexEditItem] = useState<number | null>(null);\n  const [isEditMode, setEditMode] = useState<boolean>(false);\n  const [objectOfArray, setObjectOfArray] = useState<any>(initialValue);\n\n  const arrayOfItems = useMemo(\n    () =>\n      itemTitledBy\n        ? values.filter((item) =>\n            Object.keys(item).some((key) => key === itemTitledBy)\n          )\n        : values,\n    [itemTitledBy, values]\n  );\n\n  const arrayOfFields = useMemo(\n    () =>\n      Object.keys(objectOfArray).map((key) => {\n        const defaultData = {\n          field: key,\n          value: objectOfArray[key],\n        };\n\n        if (key === AMOUNT) {\n          return {\n            ...defaultData,\n            value: objectOfArray[key].toString(),\n            isFloat: true,\n          };\n        }\n\n        return defaultData;\n      }),\n    [objectOfArray]\n  ) as any;\n\n  const handleChangeFieldValue = useCallback(\n    (field: string, data: any) =>\n      setObjectOfArray({ ...objectOfArray, [field]: data }),\n    [objectOfArray]\n  );\n\n  const handleSetFieldsData = useCallback(() => {\n    const mutatedArr = [...values, objectOfArray];\n    onChange(mutatedArr);\n    setObjectOfArray(initialValue);\n  }, [objectOfArray, onChange, values, initialValue]);\n\n  const handleRemoveItem = useCallback(\n    (propIndex: number) => {\n      if (values.length) {\n        const newArray = values.filter(\n          (_: any, index: number) => index !== propIndex\n        );\n\n        onChange(newArray);\n      }\n    },\n    [onChange, values]\n  );\n\n  const handleEditItem = useCallback((item: any, index: number) => {\n    setEditMode(true);\n    setObjectOfArray(item);\n    setIndexEditItem(index);\n  }, []);\n\n  const handleSetEditedFieldData = useCallback(() => {\n    const newArray = values.filter((item, index) =>\n      item.id ? item.id !== objectOfArray.id : index !== indexEditItem\n    );\n\n    newArray.push(objectOfArray);\n    onChange(newArray);\n\n    setEditMode(false);\n    setIndexEditItem(null);\n    setObjectOfArray(initialValue);\n  }, [indexEditItem, objectOfArray, values, onChange, initialValue]);\n\n  return {\n    isEditMode,\n    arrayOfFields,\n    arrayOfItems,\n    handleChangeFieldValue,\n    handleSetFieldsData,\n    handleSetEditedFieldData,\n    handleRemoveItem,\n    handleEditItem,\n  };\n};\n\nexport default useArrayOfObjectsInput;\n"],"mappings":"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"}