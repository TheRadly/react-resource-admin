{"version":3,"file":"useArrayOfObjectsInput.js","names":["_react","require","AMOUNT","useArrayOfObjectsInput","_ref","initialValue","values","itemTitledBy","onChange","objectOfArray","setObjectOfArray","useState","arrayOfItems","useMemo","map","item","Object","keys","arrayOfFields","key","defaultData","field","value","toString","isFloat","handleChangeFieldValue","useCallback","data","handleSetFieldsData","mutatedArr","_default","exports","default"],"sources":["../../../../src/assets/ArrayOfObjectsInput/talons/useArrayOfObjectsInput.ts"],"sourcesContent":["import { useCallback, useMemo, useState } from \"react\";\n\ninterface UseArrayOfObjectsInputProps {\n  onChange: (arg: any) => void;\n  initialValue?: any;\n  itemTitledBy?: string;\n  values: any[];\n}\n\nconst AMOUNT = \"amount\";\n\nconst useArrayOfObjectsInput = ({\n  initialValue,\n  values,\n  itemTitledBy,\n  onChange,\n}: UseArrayOfObjectsInputProps) => {\n  const [objectOfArray, setObjectOfArray] = useState<any>(initialValue);\n\n  const arrayOfItems = useMemo(\n    () =>\n      values.map(\n        (item) =>\n          Object.keys(item[itemTitledBy as string])[0] || Object.keys(item)[0]\n      ),\n    [itemTitledBy, values]\n  );\n\n  const arrayOfFields = useMemo(\n    () =>\n      Object.keys(objectOfArray).map((key) => {\n        const defaultData = {\n          field: key,\n          value: objectOfArray[key],\n        };\n\n        if (key === AMOUNT) {\n          return {\n            ...defaultData,\n            value: objectOfArray[key].toString(),\n            isFloat: true,\n          };\n        }\n\n        return defaultData;\n      }),\n    [objectOfArray]\n  ) as any;\n\n  const handleChangeFieldValue = useCallback(\n    (field: string, data: any) =>\n      setObjectOfArray({ ...objectOfArray, [field]: data }),\n    [objectOfArray]\n  );\n\n  const handleSetFieldsData = useCallback(() => {\n    const mutatedArr = [...values, objectOfArray];\n    onChange(mutatedArr);\n\n    setObjectOfArray(initialValue);\n  }, [objectOfArray, onChange, values, initialValue]);\n\n  return {\n    arrayOfFields,\n    arrayOfItems,\n    handleChangeFieldValue,\n    handleSetFieldsData,\n  };\n};\n\nexport default useArrayOfObjectsInput;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AASA,MAAMC,MAAM,GAAG,QAAQ;AAEvB,MAAMC,sBAAsB,GAAGC,IAAA,IAKI;EAAA,IALH;IAC9BC,YAAY;IACZC,MAAM;IACNC,YAAY;IACZC;EAC2B,CAAC,GAAAJ,IAAA;EAC5B,MAAM,CAACK,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAAC,eAAQ,EAAMN,YAAY,CAAC;EAErE,MAAMO,YAAY,GAAG,IAAAC,cAAO,EAC1B,MACEP,MAAM,CAACQ,GAAG,CACPC,IAAI,IACHC,MAAM,CAACC,IAAI,CAACF,IAAI,CAACR,YAAY,CAAW,CAAC,CAAC,CAAC,CAAC,IAAIS,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAAC,CAAC,CACvE,CAAC,EACH,CAACR,YAAY,EAAED,MAAM,CACvB,CAAC;EAED,MAAMY,aAAa,GAAG,IAAAL,cAAO,EAC3B,MACEG,MAAM,CAACC,IAAI,CAACR,aAAa,CAAC,CAACK,GAAG,CAAEK,GAAG,IAAK;IACtC,MAAMC,WAAW,GAAG;MAClBC,KAAK,EAAEF,GAAG;MACVG,KAAK,EAAEb,aAAa,CAACU,GAAG;IAC1B,CAAC;IAED,IAAIA,GAAG,KAAKjB,MAAM,EAAE;MAClB,OAAO;QACL,GAAGkB,WAAW;QACdE,KAAK,EAAEb,aAAa,CAACU,GAAG,CAAC,CAACI,QAAQ,CAAC,CAAC;QACpCC,OAAO,EAAE;MACX,CAAC;IACH;IAEA,OAAOJ,WAAW;EACpB,CAAC,CAAC,EACJ,CAACX,aAAa,CAChB,CAAQ;EAER,MAAMgB,sBAAsB,GAAG,IAAAC,kBAAW,EACxC,CAACL,KAAa,EAAEM,IAAS,KACvBjB,gBAAgB,CAAC;IAAE,GAAGD,aAAa;IAAE,CAACY,KAAK,GAAGM;EAAK,CAAC,CAAC,EACvD,CAAClB,aAAa,CAChB,CAAC;EAED,MAAMmB,mBAAmB,GAAG,IAAAF,kBAAW,EAAC,MAAM;IAC5C,MAAMG,UAAU,GAAG,CAAC,GAAGvB,MAAM,EAAEG,aAAa,CAAC;IAC7CD,QAAQ,CAACqB,UAAU,CAAC;IAEpBnB,gBAAgB,CAACL,YAAY,CAAC;EAChC,CAAC,EAAE,CAACI,aAAa,EAAED,QAAQ,EAAEF,MAAM,EAAED,YAAY,CAAC,CAAC;EAEnD,OAAO;IACLa,aAAa;IACbN,YAAY;IACZa,sBAAsB;IACtBG;EACF,CAAC;AACH,CAAC;AAAC,IAAAE,QAAA,GAEa3B,sBAAsB;AAAA4B,OAAA,CAAAC,OAAA,GAAAF,QAAA"}